import{q as _,r as h,s as I,c as u,a as t,F as v,e as g,t as n,h as y,i as p,f,m as L,o as m,n as b,b as U,x as z,w as B}from"./index-Bfib_ba1.js";import{d as S}from"./vuedraggable.umd-BmFcJBvN.js";import{_ as G}from"./plugin-vue-export-helper-DlAUqK2U.js";import"./commonjsHelpers-CE1G-McA.js";const M={class:"seating-view"},N={class:"page-header"},T={class:"title-group"},E={class:"activity-tabs"},F=["onClick"],R={class:"grid-controls"},q={class:"grid-info"},j={class:"editor-layout"},H={class:"panel list-side"},J={class:"panel-header"},K={class:"person-card"},O={class:"card-main"},Q={class:"p-serial"},W={class:"p-name"},X={class:"p-company"},Y={class:"panel map-side"},Z={class:"seat-label"},ee={class:"seated-card"},se={class:"s-serial"},te={class:"s-name"},ae=["onClick"],ne={__name:"SeatManager",setup(oe){const w=[{id:"act_01",name:"開幕典禮"},{id:"act_02",name:"高峰論壇"}],i=_("act_01"),V=[{id:"P01",name:"王小明",company:"文靜科技",serial:"V001",type:"VIP"},{id:"P02",name:"李大華",company:"創新設計",serial:"A052",type:"Attendee"},{id:"P03",name:"張美麗",company:"全球物流",serial:"S003",type:"Staff"},{id:"P04",name:"陳小美",company:"文靜科技",serial:"V004",type:"VIP"}],o=h({rows:3,cols:5}),r=h({act_01:Array.from({length:15},(a,s)=>({id:`s-${s}`,label:`座-${s+1}`,attendee:[]})),act_02:Array.from({length:15},(a,s)=>({id:`s-${s}`,label:`座-${s+1}`,attendee:[]}))}),$=()=>{o.rows++;const a=o.rows*o.cols,s=r[i.value];for(;s.length<a;){const e=s.length;s.push({id:`s-${Date.now()}-${e}`,label:`座-${e+1}`,attendee:[]})}},k=()=>{o.cols++;const a=o.rows*o.cols,s=r[i.value];for(;s.length<a;){const e=s.length;s.push({id:`s-${Date.now()}-${e}`,label:`座-${e+1}`,attendee:[]})}},d=_([]),C=()=>{const s=r[i.value].filter(e=>e.attendee.length>0).map(e=>e.attendee[0].id);d.value=V.filter(e=>!s.includes(e.id))};I(i,()=>C(),{immediate:!0});let c=null;const A=a=>{c=a},x=()=>{c=null},P=(a,s)=>{if(s.attendee.length>1){const e=s.attendee[0];s.attendee.splice(0,1),c?c.attendee.push(e):d.value.push(e)}c=null},D=a=>{if(a.attendee.length>0){const s=a.attendee[0];a.attendee.splice(0,1),d.value.push(s)}};return(a,s)=>(m(),u("div",M,[t("div",N,[t("div",T,[s[1]||(s[1]=t("h2",{class:"title"},"6. 座次劃位管理",-1)),t("div",E,[(m(),u(v,null,g(w,e=>t("button",{key:e.id,class:b(["tab-btn",{active:i.value===e.id}]),onClick:l=>i.value=e.id},n(e.name),11,F)),64))])]),t("div",R,[t("button",{onClick:$,class:"ctrl-btn"},"+ 新增一排 (直)"),t("button",{onClick:k,class:"ctrl-btn"},"+ 新增一列 (橫)"),t("div",q,"當前規模: "+n(o.rows)+" x "+n(o.cols),1)])]),t("div",j,[t("aside",H,[t("div",J,[t("h3",null,"賓客名單 ("+n(d.value.length)+")",1)]),y(f(S),{modelValue:d.value,"onUpdate:modelValue":s[0]||(s[0]=e=>d.value=e),group:"seatingGroup","item-key":"id",class:"drag-area","ghost-class":"my-ghost","drag-class":"my-drag",animation:300,onStart:x},{item:p(({element:e})=>[t("div",K,[t("div",O,[t("span",Q,"#"+n(e.serial),1),s[2]||(s[2]=U()),t("span",W,n(e.name),1)]),t("div",X,n(e.company),1)])]),_:1},8,["modelValue"])]),t("main",Y,[s[4]||(s[4]=t("div",{class:"stage-banner"},"STAGE 舞台",-1)),t("div",{class:"seats-grid",style:L({gridTemplateColumns:`repeat(${o.cols}, 110px)`})},[(m(!0),u(v,null,g(r[i.value],e=>(m(),u("div",{key:e.id,class:"seat-item"},[t("div",Z,n(e.label),1),y(f(S),{modelValue:e.attendee,"onUpdate:modelValue":l=>e.attendee=l,group:"seatingGroup","item-key":"id",class:b(["drop-zone",{"is-filled":e.attendee.length>0}]),"ghost-class":"my-ghost","drag-class":"my-drag",animation:300,onStart:l=>A(e),onAdd:l=>P(l,e)},z({item:p(({element:l})=>[t("div",ee,[t("div",se,n(l.serial),1),t("div",te,n(l.name),1),t("button",{class:"s-remove",onClick:B(le=>D(e),["stop"])},"✕",8,ae)])]),_:2},[e.attendee.length===0?{name:"header",fn:p(()=>[s[3]||(s[3]=t("div",{class:"s-empty"},"空",-1))]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","class","onStart","onAdd"])]))),128))],4)])])]))}},ue=G(ne,[["__scopeId","data-v-86c554c2"]]);export{ue as default};
